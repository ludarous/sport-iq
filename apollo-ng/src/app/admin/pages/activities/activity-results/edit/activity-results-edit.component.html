<ng-container *ngIf="activityResult">
    <div class="ui-g">
        <div class="ui-g-12 ui-md-6">
            <p-panel [header]="'Základní údaje' | translate">
                <div class="ui-g">
                    <div class="ui-g-12">
                        <form class="form-group" *ngIf="activityResultForm" [formGroup]="activityResultForm"
                              (submit)="saveActivityResult(!!activityResult.id)">
                            <div class="ui-g-12 ui-md-4">
                                <label for="activityResult-name">{{'Název' | translate}}</label>
                            </div>
                            <div class="ui-g-12 ui-md-8">
                                <input id="activityResult-name" class="w-100" type="text" pInputText
                                       formControlName="name"
                                       required/>
                            </div>

                            <div class="ui-g-12 ui-md-4">
                                <label for="activity-result-value-unit">{{'Jednotka výsledku' | translate}}</label>
                            </div>
                            <div class="ui-g-4 ui-md-8">
                                <p-dropdown id="activity-result-value-unit"
                                            [styleClass]="'w-100'"
                                            [placeholder]="'Vyberte jednotku' | translate"
                                            [options]="units"
                                            formControlName="resultUnit"
                                            [optionLabel]="'name'"
                                            [filter]="false"
                                            [showClear]="true">
                                </p-dropdown>
                            </div>

                            <div class="ui-g-12 ui-md-4">
                                <label for="activity-result-type">{{'Typ výsledku' | translate}}</label>
                            </div>
                            <div class="ui-g-4 ui-md-8">
                                <p-dropdown id="activity-result-type"
                                            [styleClass]="'w-100'"
                                            [placeholder]="'Vyberte typ výsledku' | translate"
                                            [options]="resultTypes"
                                            formControlName="resultType"
                                            [filter]="false"
                                            [showClear]="true" required>
                                </p-dropdown>
                            </div>

                            <div class="ui-g-12 ui-md-4">
                                <label for="activity-result-use-splits">{{'Použít mezivýsledky' | translate}}</label>
                            </div>
                            <div class="ui-g-4 ui-md-8">
                                <p-checkbox id="activity-result-use-splits" binary="true" [(ngModel)]="useSplits" [ngModelOptions]="{standalone: true}">
                                </p-checkbox>
                            </div>
                        </form>
                    </div>
                </div>
            </p-panel>
        </div>
        <div *ngIf="useSplits" class="ui-g-12 ui-md-6">
            <p-panel [header]="'Mezivýsledky' | translate">
                <div class="ui-g">
                    <div class="ui-g-12">
                        <p-table [value]="activityResult.resultSplits">
                            <ng-template pTemplate="header">
                                <th>{{'Hodnota mezivýsledku' | translate}}</th>
                                <th>{{'Jednotka mezivýsledku' | translate}}</th>
                                <th></th>
                            </ng-template>
                            <ng-template pTemplate="body" let-item>
                                <tr>
                                    <td pEditableColumn>
                                        <p-cellEditor>
                                            <ng-template pTemplate="input">
                                                <input pInputText type="text" [(ngModel)]="item.splitValue">
                                            </ng-template>
                                            <ng-template pTemplate="output">
                                                <div class="empty-result-split">{{item.splitValue}}</div>
                                            </ng-template>
                                        </p-cellEditor>
                                    </td>
                                    <td pEditableColumn>
                                        <p-cellEditor>
                                            <ng-template pTemplate="input">
                                                <p-dropdown [options]="units"
                                                            [(ngModel)]="item.splitUnit"
                                                            [optionLabel]="'name'"
                                                            [style]="{'width':'100%'}" required></p-dropdown>
                                            </ng-template>
                                            <ng-template pTemplate="output">
                                                <div class="empty-result-split">{{item.splitUnit?.name}}</div>
                                            </ng-template>
                                        </p-cellEditor>
                                    </td>
                                    <td class="table-action-column">
                                        <button class="ui-button-danger" type="button" icon="fa fa-trash" pButton
                                                (click)="deleteSplit($event, item)"></button>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                        <div class="ui-g">
                            <div class="ui-g-12">
                                <button pButton type="button" class="cyan-btn"
                                        [label]="('Přidat mezivýsledek' | translate)"
                                        (click)="addSplitResult()">
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </p-panel>
        </div>
    </div>

    <div class="ui-g">

    </div>
</ng-container>
<div class="ui-g">
    <div class="ui-g-12">
        <button pButton type="button" class="cyan-btn"
                [label]="!activityResult?.id ? ('Vytvořit jednotku výsledku' | translate) : ('Ulož jednotku výsledku' | translate)"
                (click)="saveActivityResult(!!activityResult.id)">
        </button>
    </div>
</div>

